*wheel.txt*		Buffer Group Manager for Vim and Neovim

==============================================================================
CONTENTS			*wheel*

Introduction			|wheel-introduction|
Step by step			|wheel-step-by-step|
Special buffers			|wheel-special-buffers|
Configuration			|wheel-configuration|
Functions			|wheel-functions|
Mappings			|wheel-mappings|

==============================================================================
INTRODUCTION						*wheel-introduction*


Goal				|wheel-introduction-goal|
Features			|wheel-introduction-features|
History				|wheel-introduction-history|

------------------------------------------------------------------------------
GOAL						*wheel-introduction-goal*

Wheel is a plugin for vim or neovim aimed at managing buffer groups.

In short, this plugin let you organize your buffers by creating as
many buffer groups as you need, add the buffers you want to it and
quickly navigate between :

- Buffers of the same group
- Buffer groups

Note that :

- A location contains a name, a filename, as well as a line & column number
- A buffer group, in fact a location group, is called a circle
- A set of buffer groups is called a torus (a circle of circles)
- The list of toruses is called the wheel

Why do you need three levels of grouping ?~

At first glance, managing groups with circles in a torus seems to
be sufficient. But with time, the torus grows big, and a third level
helps you to organize your files by groups and categories:

  - The wheel contains all the toruses
  - Each torus contains a category of files, e.g.:
    + configuration, development, publication
  - Each circle contains a project, e.g.:
    + emacs or vifm circles in configuration torus
    + shell or elisp in development torus
    + tea or art in publication torus

A wheel that follows you~
    ~
Torus helps you to organize your files in groups that you create
yourself, following your workflow. You only add the files you want,
where you want. For instance, if you have a "organize" group with agenda
& todo files, you can quickly alternate them, or display them in two
windows. Then, if you suddenly got an idea to tune vim, you switch to the
"vim" group with your favorites configuration files in it. Same process,
to cycle, alternate or display the files. Over time, your groups will
grow and adapt to your style.

------------------------------------------------------------------------------
FEATURES				*wheel-introduction-features*

- Easy navigation
  + On demand loading of files
  + Jump to matching tab & window if available
  + Choose file, group or category in special buffer
    * Filter candidates
  + Auto |:lcd| to project root of current file
- May be saved in torus file
-  Moving elements
-  Display files
  + In header-line tabs
  + In split windows
-  Autogroup
-  Batch operations

------------------------------------------------------------------------------
HISTORY						*wheel-introduction-history*

This project is inspired by :

- CtrlSpace : https://github.com/vim-ctrlspace/vim-ctrlspace, a similar
plugin for Vim

- Torus : https://github.com/chimay/torus, a similar plugin for Emacs,
itself inspired by MTorus

==============================================================================
STEP BY STEP						*wheel-step-by-step*

First circles			|wheel-sbs-first-circles|
Moving around			|wheel-sbs-moving-around|
Square the circle		|wheel-sbs-square-the-circle|

------------------------------------------------------------------------------
FIRST CIRCLES				    	    *wheel-sbs-first-circles*

In the following discussion, I assume that you have kept the default
mapping prefix `<M-w>`.
>
Let’s say we have the files `Juice`, `Tea`, `Coffee` and we want to
group them. So, we go `Juice` and type `<M-w>a` to add a location to the
wheel. If no torus is present in the wheel, it will create it and ask
for a name. Let’s say we name it `Food`. If no group (no circle) is
found in the torus, it will be created and prompt for a name. Let’s say
we choose `Drinks`. Finally, our file `Juice` is added to the group. Its
name is the filename without extension by default.

Then, we go to `Tea` and type `<M-w>a` again. This time, it will just
ask us if we want to keep the default location name. Press enter, and
`Tea` is added to the `Drinks` group.

Same process with `Coffee`. We now have a circle `Drink` containing
three files.

If you want to create another circle, let’s say `Fruits`, simply launch
`<M-w><C-a>`, and answer `Fruits` to the prompt. You can then add the
files `Apple`, `Pear` and `Orange` to it. You can even also add `Juice`:
a file can be added to more than one circle.

Now, suppose that in the `Juice` file, you have a Pineapple
and a Mango sections, and you want to compare them. Just go to
the Pineapple section, and use `<M-w>a`. It will add the location
`Juice:pineapple-line:pineapple-col` to the current circle. Then, go to
the Mango section, and do the same. The `Juice:mango-line:mango-col`
will also be added to the circle. You can then easily alternate both,
or display them in split windows.

If you want to create another torus, let’s say `Books`, simply launch
`<M-w><S-a>`, and answer `Books` to the prompt.

------------------------------------------------------------------------------
MOVING AROUND					     *wheel-sbs-moving-around*

Cycling~

You can cycle the files of a circle with `<M-w><Left>` and
`<M-w><Right>`. These are often used bindings, so I suggest you map them
to a more convient key, like `<C-PageUp>` and `<C-PageDown>`

To cycle the circles, use `<M-w><C-Left>` and `<M-w><C-Right>`. These are
often used bindings, so I suggest you map them to a more convient key,
like `<C-Home>` and `<C-End>`

To cycle the toruses, use `<M-w><S-Left>` and `<M-w><S-Right>`. These are
often used bindings, so I suggest you map them to a more convient key,
like `<S-Home>` and `<S-End>`

Switch using completion~

You can switch :

- location with completion with `<M-w><CR>`
- circle with completion with `<M-w><C-CR>`
- torus with completion with `<M-w><S-CR>`

Switch using a special buffer~

You can also switch location, circle or torus by chosing it in |wheel-special-buffers|.

------------------------------------------------------------------------------
SQUARE THE CIRCLE				*wheel-sbs-square-the-circle*

Over time, the number of circles will grow. Completion is great, but
if you just want to alternate the two last circles in history, you’ll
probably prefer `<M-w>^`.

If you press `<M-w><C-^>`, you can choose the alternate mode in a menu :

- Alternate anywhere
- Alternate in the same circle
- Alternate in the same torus
- Alternate in another circle
- Alternate in another torus
- Alternate in same torus but another circle

A common case is to alternate two files in the same circle, and two
circles in the same torus. So, you have the square :

 Alternate    | File 1	        | File 2
--------------|-----------------|-----------------
Circle Drinks | Juice           | Tea
Circle Fruits | Apple           | Pear

at your fingertips.

==============================================================================
SPECIAL BUFFERS					    *wheel-special-buffers*

Introduction			|wheel-special-buffers-introduction|
Navigation buffers		|wheel-special-buffers-navigation|
Reordering buffers		|wheel-special-buffers-reordering|

------------------------------------------------------------------------------
INTRODUCTION				*wheel-special-buffers-introduction*

Special buffers allow you to perform Wheel operations intuitively, using
full power of your editor : search, yank, paste, completion, and so on.

The type of action depends on the context :

- Navigation buffers allow you to filter and jump to a location, circle or torus
- Reordering buffers allow you to reorder locations, circles or toruses

------------------------------------------------------------------------------
NAVIGATION BUFFERS			*wheel-special-buffers-navigation*

The navigation buffers allow you to quickly jump to a Wheel element by
pressing enter on the matching line. You can use Vim / Neovim search
to find it.

You can also go to insert mode and filter the elements with each word
you enter on the first line. Typing `<Space>`, `<Esc>` or `<CR>` will
update the candidates. Note that `<C-c>` is not mapped, in case you need
to go to normal mode without triggering the filter function.

The default mappings are :

- `<M-w><Space>`: jump to location
- `<M-w><C-space>` : jump to circle
- `<M-w><S-space>` : jump to torus
- `<M-w>s` : index of toruses >> circles > locations
- `<M-w><C-s>` : index of toruses >> circles
- `<M-w><M-s>` : use folds to display tree of toruses, circles and locations

------------------------------------------------------------------------------
REORDERING BUFFERS			*wheel-special-buffers-reordering*

The navigation buffers allow you to quickly reorder Wheel elements by
reordering the buffer lines. You can use yank/delete/paste operations to
perform the reordering, or sort them with |:sort|.

To validate your change, simply |:write| the buffer.

==============================================================================
CONFIGURATION					    *wheel-configuration*

Dictionary				|wheel-config-dictionary|
Autoread				|wheel-config-autoread|
Autowrite				|wheel-config-autowrite|
File					|wheel-config-file|
Backups					|wheel-config-backups|
Mappings				|wheel-config-mappings|
Prefix					|wheel-config-prefix|
Cd project				|wheel-config-cd_project|
Project markers				|wheel-config-project_markers|
Max history 				|wheel-config-max_history|
Autocommands				|wheel-config-autocommands|

------------------------------------------------------------------------------
DICTIONARY					  *wheel-config-dictionary*

Customization is done using the `g:wheel_config` dictionary. You must
first initialize it : >

    let g:wheel_config = {}
<

------------------------------------------------------------------------------
AUTOREAD					    *wheel-config-autoread*

Auto read torus file on startup if non null : >
    let g:wheel_config.autoread = 1
<

------------------------------------------------------------------------------
AUTOWRITE					    *wheel-config-autowrite*


" Auto write torus file on exit if non null : >
    let g:wheel_config.autowrite = 1
<

------------------------------------------------------------------------------
FILE						    *wheel-config-file*

File to save or load the wheel : >
    let g:wheel_config.file = '~/.local/share/wheel/auto.vim'
<

Note that the directory `~/.local/share/wheel` must exist.

It is recommended to define this file and regularly save it, either manually
or automatically, using the autowrite config.

------------------------------------------------------------------------------
BACKUPS						    *wheel-config-backups*

Number of backup for the wheel file : >
    let g:wheel_config.backups = 3
<

Assuming your wheel file is `auto.vim`, the backups will be named
`auto.vim.1`, `auto.vim.2`, `auto.vim.3`, and so on.

It is recommended to use backups, in case things get messed up
accidentally.

------------------------------------------------------------------------------
MAPPINGS					    *wheel-config-mappings*

Determine how many default mappings are available : >
    let g:wheel_config.mappings = 10
<

See |wheel-mappings-levels| for more information.

------------------------------------------------------------------------------
PREFIX						    *wheel-config-prefix*

Prefix for mappings of level 0, 1, 2 : >
    let g:wheel_config.prefix = '<my-wonderful-prefix>'
<

See |wheel-mappings-prefix| for more information.

------------------------------------------------------------------------------
CD PROJECT					*wheel-config-cd_project*

Try to change dir to project root it > 0 : >
    let g:wheel_config.cd_project = 1
<

------------------------------------------------------------------------------
PROJECT MARKERS				*wheel-config-project_markers*

File(s) or directories(s) marking a project root. Can take a string or
list value. : >
    let g:wheel_config.project_markers = '.git'
    let g:wheel_config.project_markers = ['.git', '.my-project-root']
<

------------------------------------------------------------------------------
MAX HISTORY				   *wheel-config-max_history*

Maximum number of elements in the wheel history : >
    let g:wheel_config.max_history = 50
<

------------------------------------------------------------------------------
AUTOCOMMANDS				   *wheel-config-autocommands*

The user autocommands `WheelAfterJump` are executed at the end of each
navigation operation in the Wheel ; basically, each time you jump to
another file using wheel functions.

This example fold everything except the cursor line : >
    autocmd User WheelAfterJump norm zMzx
<

==============================================================================
FUNCTIONS					        *wheel-functions*


==============================================================================
MAPPINGS						    *wheel-mappings*

Levels				|wheel-mappings-levels|
Prefix				|wheel-mappings-prefix|
Mnemonic			|wheel-mappings-mnemonic|
Level 0				|wheel-mappings-level-0|
Level 1				|wheel-mappings-level-1|
Level 2				|wheel-mappings-level-2|
Level 10			|wheel-mappings-level-10|

------------------------------------------------------------------------------
LEVELS						    *wheel-mappings-levels*

The mappings are organized in levels :

- Level 0  : basic
- Level 1  : common
- Level 2  : advanced
- Level 10 : non-prefix mappings

If you set the option `g:wheel_config.prefix` to an integer `N`, all
mappings of level less or equal to `N` will be bound to keys. So, the
higher this option, the more mappings available.

E.g., if you want a level of 2 : >
    let g:wheel_config.prefix = 2
<

Level 1 or 2 is fine for most usages. See |wheel-mappings-level-0| and
subsequent for more information.

------------------------------------------------------------------------------
PREFIX						    *wheel-mappings-prefix*

Default mappings of levels 0, 1, 2 use a prefix key. This prefix is `<M-w>` by
default. You can customize it : >
    let g:wheel_config.prefix = '<my-wonderful-prefix>'
<

I like to set it to `<D-w>`, but since the `<D-...>` mappings don't seem
to work in terminal or with Gvim, it is not the default. It's working on
Neovim-qt, though : >
    let g:wheel_config.prefix = '<D-w>'
<

------------------------------------------------------------------------------
MNEMONIC					*wheel-mappings-mnemonic*

Most mappings respect the following convention :

- prefix + `letter`     : location operation
- prefix + `<C-letter>` : circle operation
- prefix + `<S-letter>` : location operation

------------------------------------------------------------------------------
LEVEL 0						*wheel-mappings-level-0*

Add~

| Prefix + | With default prefix | Action                             |
| a        | <M-w>a              | Add location to the current circle |
| <C-a>    | <M-w><C-a>          | Add circle to the current torus    |
| A        | <M-w>A              | Add torus to the wheel             |
| f        | <M-w>f              | Add file                           |
| b        | <M-w>b              | Add buffer                         |
| <M-a>    | <M-w><M-a>          | Add menu                           |

Navigation : next / previous~

| Prefix +    | With default prefix | Action                  |
| <left>      | <M-w><left>         | Go to previous location |
| <right>     | <M-w><right>        | Go to next location     |
| <C-left>    | <M-w><C-left>       | Go to previous circle   |
| <C-right>   | <M-w><C-right>      | Go to next circle       |
| <S-left>    | <M-w><S-left>       | Go to previous torus    |
| <S-right>   | <M-w><S-right>      | Go to next torus        |

Read / Write file~

| Prefix + | With default prefix | Action             |
| r        | <M-w>r              | Load wheel file    |
| w        | <M-w>w              | Save wheel in file |

------------------------------------------------------------------------------
LEVEL 1						*wheel-mappings-level-1*

Rename~

| Prefix + | With default prefix | Action                  |
| n        | <M-w>n              | Rename current location |
| <C-n>    | <M-w><C-n>          | Rename current circle   |
| N        | <M-w>N              | Rename current torus    |

Delete~

| Prefix + | With default prefix | Action                  |
| d        | <M-w>d              | Delete current location |
| <C-d>    | <M-w><C-d>          | Delete current circle   |
| D        | <M-w>D              | Delete current torus    |

Navigation : switch~

| Prefix + | With default prefix | Action             |
| <CR>     | <M-w><CR>           | Switch to location |
| <C-CR>   | <M-w><C-CR>         | Switch to circle   |
| <S-CR>   | <M-w><S-CR>         | Switch to torus    |

History~

| Prefix +      | With default prefix | Action                          |
| <tab>         | <M-w><tab>          | Go to newer location in history |
| <backspace>   | <M-w><backspace>    | Go to older location in history |
| ^             | <M-w>^              | Alternate last two locations    |
| <C-^>         | <M-w><C-^>          | Menu to alternate locations     |

------------------------------------------------------------------------------
LEVEL 2						*wheel-mappings-level-2*

------------------------------------------------------------------------------
LEVEL 10					*wheel-mappings-level-10*

The level 10 offers quicker mappings for the most used wheel functions. You
can set the mapping level to 10 to activate them, or adapt them to your taste
and add them to your init file.

| Mapping        | Action                                |
| <D-Insert>     | Add location to the current circle    |
| <D-Del>        | Delete current location               |
| <C-PageUp>     | Go to previous location               |
| <C-PageDown>   | Go to next location                   |
| <C-Home>       | Go to previous circle                 |
| <C-End>        | Go to next circle                     |
| <S-Home>       | Go to previous torus                  |
| <S-End>        | Go to next torus                      |
| <Space>        | Choose location in special buffer     |
| <C-Space>      | Choose circle in special buffer       |
| <S-Space>      | Choose torus in special buffer        |
| <D-Space>      | Switch to location with completion    |
| <D-=>          | Switch to circle                      |
| <D-*>          | Switch to torus                       |
| <S-PageUp>     | Go to newer location in history       |
| <S-PageDown>   | Go to older location in history       |
| <C-^>          | Alternate last two locations          |
| <D-^>          | Alternate in same torus, other circle |
| <C-S-PageUp>   | Alternate in same torus               |
| <C-S-PageDown> | Alternate in same circle              |
| <C-S-Home>     | Alternate in other torus              |
| <C-S-End>      | Alternate in other circle             |

==============================================================================
vim:tw=78:ts=8:ft=help:norl:noet:fen:
